@page "/services/coaching/Case-studies"

@rendermode InteractiveServer

@inject ILogger<Case_studies> Logger

<PageTitle>@pageTitle</PageTitle>

<div class="case-studies-page">
    <div class="testimonials-wave-top"></div>
    <div class="title-section">
        <h2>Success Case <span class="highlight">Studies</span></h2>
        <p class="section-subtitle">Transformative Coaching Journeys</p>
    </div>
    
    <div class="case-studies-container">
        <div class="case-studies-grid">
            @foreach (var testimonial in testimonials)
            {
                <div class="case-study-card">
                    <div class="case-study-media">
                        <div class="case-study-video-wrapper" @onclick="() => ToggleVideo(testimonial.Id)">
                            <video id="video-@testimonial.Id" playsinline controls=true volume="0.5" 
                                  @onended="() => OnVideoEnded(testimonial.Id)">           
                                <source src="@testimonial.Path" type="video/mp4">
                            </video>
                            <div class="case-study-video-overlay @(testimonial.IsPlaying ? "hidden" : "")">
                                <div class="case-study-play-btn">
                                    <i class="@(testimonial.IsPlaying ? "fas fa-pause" : "fas fa-play")"></i>
                                </div>
                            </div>
                        </div>
                        <div class="case-study-author-info">
                            <p class="case-study-author">@testimonial.Author</p>
                            <p class="case-study-role">@testimonial.Role</p>
                            <p class="case-study-duration">@testimonial.Duration</p>
                        </div>
                    </div>
                    
                    <div class="case-study-content">
                        <div class="case-study-sections">
                            @* <div class="case-study-section">
                                <h4 class="case-study-section-title">
                                    <i class="fas fa-flag-checkered"></i>
                                    Challenge
                                </h4>
                                <p>@testimonial.Challenge</p>
                            </div>
                            <div class="case-study-section">
                                <h4 class="case-study-section-title">
                                    <i class="fas fa-lightbulb"></i>
                                    Solution
                                </h4>
                                <p>@testimonial.Solution</p>
                            </div> *@
                            <div class="case-study-section">
                                <h4 class="case-study-section-title">
                                    <i class="fas fa-chart-line"></i>
                                    Results
                                </h4>
                                <p>@testimonial.Results</p>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>

    <div class="cta-section">
        <div class="cta-content">
            <h2>Ready to Transform Your Future?</h2>
            <p>Schedule a free consultation call to discuss your goals</p>
        </div>
        <a href="#contact" class="services-cta-button" @onclick:preventDefault>
            <span class="cta-icon"><i class="fas fa-calendar-check"></i></span>
            <span class="cta-text">
                <span class="primary-text">Book a Free Call to Start Your Transformation Today</span>
                <span class="secondary-text">30 minutes, zero obligation</span>
            </span>
            <i class="fas fa-arrow-right"></i>
        </a>
    </div>

    <div class="testimonials-wave-bottom"></div>
</div>

@code {
    private string pageTitle = "Case Studies | Ítala Veloso";
    private List<Testimonial> testimonials = new List<Testimonial>
        {
            new Testimonial
            {
                Id = 7,
                Path = "https://italaveloso.com/Testimonials/testimonial_Fran.mp4",
                Challenge = "Feeling stuck with work-life, emotional and career growth obstacles.",
                Solution = "Implemented emotional healing, patterns awareness and life coaching strategy. Tailored to personal growth, self love and self-development skills.",
                Results = "When I started my coaching journey with Itala, I thought I had things pretty well sorted. What extra help I could get was going to be great. Little did I know I was going to get a lot of help. Ideas that have been floating around in my entrepreneurial brain, some for more than a decade, are now on paper in a roadmap. They are tangible, and it’s fantastic I can now implement them. Itala really is a bright spark of joy. Sometimes, if I didn't feel that great going into a session, I felt like a million bucks afterwards because her personality is so bubbly and bright. I just love working with her, and I can't imagine a better life coach. If you're thinking about coaching, give Itala a chance because you really won't regret it. There's no way I could have thought of these things on my own, but with the right guidance, it's come together wonderfully. Itala, thank you from the bottom of my heart. You're amazing, and I can't wait to continue the journey with you.",
                Author = "Fran",
                Role = "Civil Servant",
                Duration = "3 Month Journey"
            },
            new Testimonial
            {
                Id = 1,
                Path = "https://italaveloso.com/Testimonials/testimonial_Laviniah.mp4",
                Challenge = "Feeling stuck with work-life, emotional and career growth obstacles.",
                Solution = "Implemented emotional healing, patterns awareness and life coaching strategy. Tailored to personal growth, self love and self-development skills.",
                Results = "Ítala been really helpful in terms of giving me concrete knowledge about things to do with trauma, how it affects our behaviours, thinking, patterns; in order to change our actions and outputs into this world. There has been such growth and work of development and I am very proud with where I am right now. Thank you and highly recommend Ítala",
                Author = "Laviniah",
                Role = "Cyber Security Analyst",
                Duration = "6 Month Journey"
            },
            new Testimonial
            {
                Id = 2,
                Path = "https://italaveloso.com/Testimonials/testimonial_Fi.mp4",
                Challenge = "Feeling overwhelmed, anxious about life and work.",
                Solution = "Structured life coaching strategy combined with confidence, self-love, forgiveness-building exercises.",
                Results = "Ítala kept getting me into this place that it is ok to feel what I was feeling and to no rush it! It is ok to feel a bit weird, it is ok to feel the love (I've never known how to deal with and how to receive love and all of the sudden there was so much love in the atmosphere - Praise God)... She gave me the time that I really needed to process that and I am eternally grateful.",
                Author = "Fi",
                Role = "Civil Servant",
                Duration = "8 Month Journey"
            },
            new Testimonial
            {
                Id = 3,
                Path = "https://italaveloso.com/Testimonials/testimonial_Monica.mp4",
                Challenge = "Feeling stuck with work-life, emotional and career growth obstacles.",
                Solution = "Implemented forgiveness, emotional healing and life coaching strategy, to break free and start to move foward in life.",
                Results = "With coaching, Ítala really helped me to get to know myself better; to believe more in myself... I am really grateful to have unlocked and let go of things that happened in my past that was preventing me to move forward and improve myself. I am really thankful for that. The biggest knowledge I took from this transformation is that I am Capable of more things that I thought that I was. I am such a Stronger person now, since coaching. I highly recommend!",
                Author = "Mónica",
                Role = "Oral Health",
                Duration = "1 Year Journey"
            },
            new Testimonial
            {
                Id = 4,
                Path = "https://italaveloso.com/Testimonials/testimonial_Yannick.mp4",
                Challenge = "Career transition, feelings of stuck about life and work.",
                Solution = "Holistic life coaching strategy combined with self-confidence boost, planning, self-prioritisation-building exercises.",
                Results = "Successfully moved into a new country and is now living in the UK, London. With new role, clearer direction and purpose in life.",
                Author = "Yanick",
                Role = "Hospitality Manager",
                Duration = "Life Long Journey"
            },
            new Testimonial
            {
                Id = 5,
                Path = "https://italaveloso.com/Testimonials/testimonial_Neuza.mp4",
                Challenge = "Feeling overwhelmed, burnout about life and work.",
                Solution = "Implemented boundaries through life coaching strategy combined with confidence, self-love -building exercises.",
                Results = "Achieved healthy life-work boundaries and balance. Successfully prioritising herself.",
                Author = "Neuza",
                Role = "Psychomotor Terapist",
                Duration = "8 Month Journey"
            },
            new Testimonial
            {
                Id = 6,
                Path = "https://italaveloso.com/Testimonials/testimonial_Erica.mp4",
                Challenge = "Career transition, feelings of stuck about life and work.",
                Solution = "Holistic life coaching strategy combined with perseverance and resilience boost, planning, self-prioritisation-building exercises.",
                Results = "Successfully moved into a new job role and soon to get married.",
                Author = "Érica",
                Role = "Council Officer",
                Duration = "1 Year Journey"
            }
        };

    private async Task ToggleVideo(int testimonialId)
    {
        try
        {        
            var currentTestimonial = testimonials.First(t => t.Id == testimonialId);

            foreach(var testimonial in testimonials) {
                if(testimonial.Id != testimonialId){
                    await JSRuntime.InvokeVoidAsync("pauseVideoById", "video-" + testimonial.Id);
                    testimonial.IsPlaying = false;
                }
            }

            if(!currentTestimonial.IsPlaying){
                await JSRuntime.InvokeVoidAsync("playVideoById", "video-" + currentTestimonial.Id);
                currentTestimonial.IsPlaying = true;
            } else {
                await JSRuntime.InvokeVoidAsync("pauseVideoById", "video-" + currentTestimonial.Id);
                currentTestimonial.IsPlaying = false;
            }
        } 
        catch(Exception ex) {
            Logger.LogError($"Error toggling video: {ex.Message}");
        }

        StateHasChanged();        
    }

    private void OnVideoEnded(int testimonialId)
    {
        var testimonial = testimonials.First(t => t.Id == testimonialId);
        testimonial.IsPlaying = false;
        StateHasChanged();
    }

}