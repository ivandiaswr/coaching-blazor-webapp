@page "/services/regulatory/consulting"

@rendermode InteractiveServer

<PageTitle>@pageTitle</PageTitle>

<div class="life-coaching-container">
    <h1><span class="highlight">Food Regulatory Affairs</span> Consulting</h1>
    <p>Start living a purpose-driven life and unlock your potential with guidance tailored to you. Explore the areas below:</p>

    <div class="slider-container">
        <div class="topics-grid" @ref="topicsGrid">
            @foreach (var topic in Topics)
            {
                <div class="topic-card">
                    <div class="image-wrapper">
                        <img src="@topic.ImageUrl" alt="@topic.AltText">
                        <div class="image-title">
                            <h3>@topic.Title</h3>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>

    <div class="cta-section">
        <div class="cta-content">
            <h2>Ready to Transform Your Future?</h2>
            <p>Schedule a free consultation call to discuss your goals</p>
        </div>
        <a href="#contact" class="services-cta-button" @onclick:preventDefault>
            <span class="cta-icon"><i class="fas fa-calendar-check"></i></span>
            <span class="cta-text">
                <span class="primary-text">Book Your Free Discovery Call</span>
                <span class="secondary-text">30 minutes, zero obligation</span>
            </span>
            <i class="fas fa-arrow-right"></i>
        </a>
    </div>
</div>

@code {
    private string pageTitle = "Food Regulatory Consulting | √çtala Veloso";
    private ElementReference topicsGrid;
    private List<Topic> Topics { get; set; } = new List<Topic>
    {
        new Topic {
            Id = 1,
            ImageUrl = "Images/services/regulatory-consulting/formulation-check.jpg",
            Title = "Comprehensive Formulation Compliance Check",
            AltText = "Expert reviewing product formulation documents"
        },
        new Topic {
            Id = 2,
            ImageUrl = "Images/services/regulatory-consulting/pack-copy-labeling.jpg",
            Title = "Accurate Pack Copy Labeling Services",
            AltText = "Detailed pack copy labeling analysis"
        },
        new Topic {
            Id = 3,
            ImageUrl = "Images/services/regulatory-consulting/artwork-label-check.jpg",
            Title = "Artwork and Label Compliance Verification",
            AltText = "Professional examining product artwork and labels"
        },
        new Topic {
            Id = 4,
            ImageUrl = "Images/services/regulatory-consulting/regulation-interpretation.jpg",
            Title = "Regulation Interpretation and Expert Advice",
            AltText = "Consultant providing regulatory guidance"
        },
        new Topic {
            Id = 5,
            ImageUrl = "Images/services/regulatory-consulting/hfss-compliance.jpg",
            Title = "HFSS Compliance Solutions",
            AltText = "Specialist advising on HFSS regulations"
        },
        new Topic {
            Id = 6,
            ImageUrl = "Images/services/regulatory-consulting/import-export-compliance.jpg",
            Title = "Import and Export Regulatory Compliance",
            AltText = "Expert consulting on international trade regulations"
        },
        new Topic {
            Id = 7,
            ImageUrl = "Images/services/regulatory-consulting/marketing-material-compliance.jpg",
            Title = "Marketing Material Compliance Audit (Print & Digital)",
            AltText = "Reviewing marketing content for regulatory adherence"
        },
        new Topic {
            Id = 8,
            ImageUrl = "Images/services/regulatory-consulting/label-translation.jpg",
            Title = "Regulatory Label Translation Services (EN-PT)",
            AltText = "Translating labels from English to Portuguese"
        }
    };

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await ScrollService.ScrollToTop();

        if (firstRender)
        {
            if (topicsGrid.Context == null)
            {
                Console.WriteLine("topicsGrid reference not set.");
            }
            else
            {
                Console.WriteLine("topicsGrid reference is set.");
                await JSRuntime.InvokeVoidAsync("initializeSlider", topicsGrid);
            }
        }
    }
}